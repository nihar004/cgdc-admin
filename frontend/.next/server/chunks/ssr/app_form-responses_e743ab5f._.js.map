{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acer/Desktop/deploy%20-%20Copy/soetcgdc/frontend/app/form-responses/UploadModal.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport {\r\n  FileSpreadsheet,\r\n  CheckCircle,\r\n  XCircle,\r\n  Upload,\r\n  X,\r\n  AlertTriangle,\r\n  FileText,\r\n  BarChart3,\r\n} from \"lucide-react\";\r\nimport axios from \"axios\";\r\nconst backendUrl = process.env.NEXT_PUBLIC_BACKEND_URL;\r\n\r\nconst UploadModal = ({ selectedForm, setShowUploadModal, fetchForms }) => {\r\n  const [file, setFile] = useState(null);\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [uploadStatus, setUploadStatus] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [activeTab, setActiveTab] = useState(\"summary\");\r\n  const [statusFilter, setStatusFilter] = useState(\"all\");\r\n\r\n  const handleDrag = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\r\n      setDragActive(true);\r\n    } else if (e.type === \"dragleave\") {\r\n      setDragActive(false);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragActive(false);\r\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\r\n      const droppedFile = e.dataTransfer.files[0];\r\n      if (validateFile(droppedFile)) {\r\n        setFile(droppedFile);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      const selectedFile = e.target.files[0];\r\n      if (validateFile(selectedFile)) {\r\n        setFile(selectedFile);\r\n      }\r\n    }\r\n  };\r\n\r\n  const validateFile = (file) => {\r\n    const allowedTypes = [\r\n      \"text/csv\",\r\n      \"application/vnd.ms-excel\",\r\n      \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\r\n    ];\r\n\r\n    if (!allowedTypes.includes(file.type)) {\r\n      setError(\"Only CSV and Excel files are allowed\");\r\n      return false;\r\n    }\r\n\r\n    if (file.size > 10 * 1024 * 1024) {\r\n      setError(\"File size must be less than 10MB\");\r\n      return false;\r\n    }\r\n\r\n    setError(null);\r\n    return true;\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!file || !selectedForm) return;\r\n\r\n    try {\r\n      setUploading(true);\r\n      setUploadProgress(0);\r\n      setUploadStatus({ type: \"loading\", message: \"Processing file...\" });\r\n      setError(null);\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      // Simulate API call - replace with actual axios call\r\n      await new Promise((resolve) => {\r\n        const interval = setInterval(() => {\r\n          setUploadProgress((prev) => {\r\n            const newProgress = prev + 10;\r\n            setUploadStatus({\r\n              type: \"loading\",\r\n              message: `Uploading... ${newProgress}%`,\r\n            });\r\n            if (newProgress >= 100) {\r\n              clearInterval(interval);\r\n              resolve();\r\n            }\r\n            return newProgress;\r\n          });\r\n        }, 200);\r\n      });\r\n\r\n      const response = await axios.post(\r\n        `${backendUrl}/forms/${selectedForm.id}/upload`,\r\n        formData,\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n          onUploadProgress: (progressEvent) => {\r\n            const percentCompleted = Math.round(\r\n              (progressEvent.loaded * 100) / progressEvent.total\r\n            );\r\n            setUploadProgress(percentCompleted);\r\n            setUploadStatus({\r\n              type: \"loading\",\r\n              message: `Uploading... ${percentCompleted}%`,\r\n            });\r\n          },\r\n        }\r\n      );\r\n\r\n      setUploadStatus({\r\n        type: \"success\",\r\n        message: \"Upload completed successfully!\",\r\n        summary: response.data.summary,\r\n        details: response.data.details || [],\r\n      });\r\n\r\n      if (fetchForms) fetchForms();\r\n    } catch (err) {\r\n      setUploadStatus(null);\r\n      // NEW: Check for eligibility snapshot missing\r\n      if (err.response?.data?.requiresAction === \"create_eligibility\") {\r\n        setError(\r\n          `${err.response.data.message}\\n\\nPlease go to Company Management and create the eligibility snapshot first.`\r\n        );\r\n      } else {\r\n        setError(err.response?.data?.message || \"Failed to upload file\");\r\n      }\r\n\r\n      console.error(\"Upload error:\", err);\r\n    } finally {\r\n      setUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  const resetModal = () => {\r\n    setShowUploadModal(false);\r\n    setUploadStatus(null);\r\n    setFile(null);\r\n    setError(null);\r\n    setUploadProgress(0);\r\n    setActiveTab(\"summary\");\r\n    setStatusFilter(\"all\");\r\n  };\r\n\r\n  const getFilteredDetails = () => {\r\n    if (!uploadStatus?.details) return [];\r\n    if (statusFilter === \"all\") return uploadStatus.details;\r\n    return uploadStatus.details.filter((item) => item.status === statusFilter);\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case \"success\":\r\n        return <CheckCircle className=\"h-4 w-4 text-green-600\" />;\r\n      case \"error\":\r\n        return <XCircle className=\"h-4 w-4 text-red-600\" />;\r\n      case \"duplicate\":\r\n        return <AlertTriangle className=\"h-4 w-4 text-yellow-600\" />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case \"success\":\r\n        return \"bg-green-50 text-green-800 border-green-200\";\r\n      case \"error\":\r\n        return \"bg-red-50 text-red-800 border-red-200\";\r\n      case \"duplicate\":\r\n        return \"bg-yellow-50 text-yellow-800 border-yellow-200\";\r\n      default:\r\n        return \"bg-gray-50 text-gray-800 border-gray-200\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden animate-in fade-in-0 zoom-in-95 duration-300\">\r\n        {/* Header */}\r\n        <div className=\"bg-blue-600 px-6 py-4 text-white relative\">\r\n          <button\r\n            onClick={resetModal}\r\n            className=\"absolute top-4 right-4 p-1 hover:bg-white/20 rounded-lg transition-colors\"\r\n          >\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-white/20 rounded-lg\">\r\n              <Upload className=\"h-5 w-5\" />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"text-xl font-semibold\">Upload Data</h3>\r\n              <p className=\"text-blue-100 text-sm\">\r\n                Form: {selectedForm?.title || \"Demo Form\"}\r\n              </p>\r\n              {selectedForm?.batch_year && (\r\n                <p className=\"text-blue-200 text-xs\">\r\n                  Batch Year: {selectedForm.batch_year} • Only students from\r\n                  this batch can be uploaded\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-80px)]\">\r\n          {/* Upload Area */}\r\n          {!uploadStatus && (\r\n            <div className=\"space-y-6\">\r\n              <div\r\n                className={`relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 ${\r\n                  dragActive\r\n                    ? \"border-blue-400 bg-blue-50 scale-105\"\r\n                    : file\r\n                      ? \"border-green-400 bg-green-50\"\r\n                      : \"border-gray-300 hover:border-gray-400 hover:bg-gray-50\"\r\n                }`}\r\n                onDragEnter={handleDrag}\r\n                onDragLeave={handleDrag}\r\n                onDragOver={handleDrag}\r\n                onDrop={handleDrop}\r\n              >\r\n                {file ? (\r\n                  <div className=\"space-y-4\">\r\n                    <div className=\"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full\">\r\n                      <CheckCircle className=\"h-8 w-8 text-green-600\" />\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-lg font-semibold text-green-800\">\r\n                        File Ready\r\n                      </p>\r\n                      <p className=\"text-green-600\">Click upload to process</p>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-4\">\r\n                    <div\r\n                      className={`inline-flex items-center justify-center w-16 h-16 rounded-full transition-colors ${\r\n                        dragActive ? \"bg-blue-100\" : \"bg-gray-100\"\r\n                      }`}\r\n                    >\r\n                      <FileSpreadsheet\r\n                        className={`h-8 w-8 ${dragActive ? \"text-blue-600\" : \"text-gray-400\"}`}\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-lg font-semibold text-gray-700\">\r\n                        {dragActive\r\n                          ? \"Drop your file here\"\r\n                          : \"Drag & drop your file\"}\r\n                      </p>\r\n                      <p className=\"text-gray-500\">or click to browse</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <input\r\n                  type=\"file\"\r\n                  onChange={handleFileChange}\r\n                  accept=\".csv,.xlsx,.xls\"\r\n                  className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\r\n                />\r\n\r\n                {!file && (\r\n                  <button className=\"mt-4 px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm\">\r\n                    Select File\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              {/* File Info */}\r\n              {file && (\r\n                <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <div className=\"p-2 bg-green-100 rounded-lg\">\r\n                      <FileText className=\"h-5 w-5 text-green-600\" />\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <p className=\"font-semibold text-green-800\">\r\n                        Selected File\r\n                      </p>\r\n                      <p className=\"text-green-700\">{file.name}</p>\r\n                      <p className=\"text-sm text-green-600\">\r\n                        Size: {(file.size / 1024 / 1024).toFixed(2)} MB\r\n                      </p>\r\n                    </div>\r\n                    <button\r\n                      onClick={() => setFile(null)}\r\n                      className=\"p-1 hover:bg-green-200 rounded text-green-600\"\r\n                    >\r\n                      <X className=\"h-4 w-4\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Error Display */}\r\n              {error && (\r\n                <div className=\"bg-red-50 border border-red-200 rounded-xl p-4\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <AlertTriangle className=\"h-5 w-5 text-red-500 flex-shrink-0\" />\r\n                    <p className=\"text-red-700 font-medium\">{error}</p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Requirements */}\r\n              <div className=\"bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-5\">\r\n                <h4 className=\"font-semibold text-amber-800 mb-3 flex items-center gap-2\">\r\n                  <AlertTriangle className=\"h-5 w-5\" />\r\n                  Upload Requirements & Important Notes\r\n                </h4>\r\n                <div className=\"grid md:grid-cols-2 gap-3 text-sm text-amber-700\">\r\n                  <div className=\"flex items-start gap-2\">\r\n                    <div className=\"w-1.5 h-1.5 bg-amber-500 rounded-full mt-2 flex-shrink-0\"></div>\r\n                    <span>File must contain registration number column</span>\r\n                  </div>\r\n                  <div className=\"flex items-start gap-2\">\r\n                    <div className=\"w-1.5 h-1.5 bg-amber-500 rounded-full mt-2 flex-shrink-0\"></div>\r\n                    <span>Supported: CSV, Excel (.xlsx, .xls)</span>\r\n                  </div>\r\n                  <div className=\"flex items-start gap-2\">\r\n                    <div className=\"w-1.5 h-1.5 bg-amber-500 rounded-full mt-2 flex-shrink-0\"></div>\r\n                    <span>Registration numbers validated against database</span>\r\n                  </div>\r\n                  <div className=\"flex items-start gap-2\">\r\n                    <div className=\"w-1.5 h-1.5 bg-amber-500 rounded-full mt-2 flex-shrink-0\"></div>\r\n                    <span>Duplicate entries will be flagged</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Data Replacement Warning */}\r\n                <div className=\"mt-4 p-3 bg-orange-50 border border-orange-200 rounded-lg\">\r\n                  <div className=\"flex items-start gap-2\">\r\n                    <AlertTriangle className=\"h-4 w-4 text-orange-600 mt-0.5 flex-shrink-0\" />\r\n                    <div>\r\n                      <p className=\"font-medium text-orange-800 text-sm\">\r\n                        Data Replacement Policy\r\n                      </p>\r\n                      <p className=\"text-xs text-orange-700 mt-1\">\r\n                        Uploading new data will{\" \"}\r\n                        <strong>replace existing responses</strong> for students\r\n                        already in the system. Students not in the new file will\r\n                        keep their existing data.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Loading State */}\r\n          {uploadStatus?.type === \"loading\" && (\r\n            <div className=\"text-center py-12 space-y-6\">\r\n              <div className=\"relative inline-flex items-center justify-center w-20 h-20\">\r\n                <div className=\"absolute inset-0 rounded-full border-4 border-blue-200\"></div>\r\n                <div\r\n                  className=\"absolute inset-0 rounded-full border-4 border-blue-600 border-t-transparent animate-spin\"\r\n                  style={{ animationDuration: \"1s\" }}\r\n                ></div>\r\n                <Upload className=\"h-8 w-8 text-blue-600\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-xl font-semibold text-gray-800\">\r\n                  {uploadStatus.message}\r\n                </p>\r\n                <div className=\"w-64 h-2 bg-gray-200 rounded-full mx-auto mt-4\">\r\n                  <div\r\n                    className=\"h-full bg-blue-600 rounded-full transition-all duration-300\"\r\n                    style={{ width: `${uploadProgress}%` }}\r\n                  ></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Success State */}\r\n          {uploadStatus?.type === \"success\" && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"text-center py-4\">\r\n                <div className=\"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4\">\r\n                  <CheckCircle className=\"h-10 w-10 text-green-600\" />\r\n                </div>\r\n                <h4 className=\"text-2xl font-bold text-green-800 mb-2\">\r\n                  Upload Complete!\r\n                </h4>\r\n                <p className=\"text-green-600\">\r\n                  Your data has been processed successfully\r\n                </p>\r\n              </div>\r\n\r\n              {/* Tab Navigation */}\r\n              <div className=\"flex border-b border-gray-200\">\r\n                <button\r\n                  onClick={() => setActiveTab(\"summary\")}\r\n                  className={`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${\r\n                    activeTab === \"summary\"\r\n                      ? \"border-blue-600 text-blue-600\"\r\n                      : \"border-transparent text-gray-500 hover:text-gray-700\"\r\n                  }`}\r\n                >\r\n                  <BarChart3 className=\"h-4 w-4 inline mr-2\" />\r\n                  Summary\r\n                </button>\r\n                <button\r\n                  onClick={() => setActiveTab(\"details\")}\r\n                  className={`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${\r\n                    activeTab === \"details\"\r\n                      ? \"border-blue-600 text-blue-600\"\r\n                      : \"border-transparent text-gray-500 hover:text-gray-700\"\r\n                  }`}\r\n                >\r\n                  <FileText className=\"h-4 w-4 inline mr-2\" />\r\n                  Details ({uploadStatus.details?.length || 0})\r\n                </button>\r\n              </div>\r\n\r\n              {/* Summary Tab */}\r\n              {activeTab === \"summary\" && (\r\n                <div className=\"space-y-6\">\r\n                  {/* Stats Grid */}\r\n                  <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                    <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-4 text-center\">\r\n                      <div className=\"text-3xl font-bold text-blue-700 mb-1\">\r\n                        {uploadStatus.summary?.total || 0}\r\n                      </div>\r\n                      <div className=\"text-sm font-medium text-blue-600\">\r\n                        Total Records\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-xl p-4 text-center\">\r\n                      <div className=\"text-3xl font-bold text-green-700 mb-1\">\r\n                        {uploadStatus.summary?.successful || 0}\r\n                      </div>\r\n                      <div className=\"text-sm font-medium text-green-600\">\r\n                        Successful\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"bg-gradient-to-br from-yellow-50 to-yellow-100 border border-yellow-200 rounded-xl p-4 text-center\">\r\n                      <div className=\"text-3xl font-bold text-yellow-700 mb-1\">\r\n                        {uploadStatus.summary?.duplicates || 0}\r\n                      </div>\r\n                      <div className=\"text-sm font-medium text-yellow-600\">\r\n                        Duplicates\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"bg-gradient-to-br from-red-50 to-red-100 border border-red-200 rounded-xl p-4 text-center\">\r\n                      <div className=\"text-3xl font-bold text-red-700 mb-1\">\r\n                        {uploadStatus.summary?.invalid || 0}\r\n                      </div>\r\n                      <div className=\"text-sm font-medium text-red-600\">\r\n                        Invalid\r\n                      </div>\r\n                    </div>\r\n\r\n                    {uploadStatus.summary?.year_mismatches > 0 && (\r\n                      <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 rounded-xl p-4 text-center\">\r\n                        <div className=\"text-3xl font-bold text-purple-700 mb-1\">\r\n                          {uploadStatus.summary.year_mismatches}\r\n                        </div>\r\n                        <div className=\"text-sm font-medium text-purple-600\">\r\n                          Year Mismatches\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {uploadStatus.summary?.eligibility_failures > 0 && (\r\n                      <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 rounded-xl p-4 text-center\">\r\n                        <div className=\"text-3xl font-bold text-purple-700 mb-1\">\r\n                          {uploadStatus.summary.eligibility_failures}\r\n                        </div>\r\n                        <div className=\"text-sm font-medium text-purple-600\">\r\n                          Eligibility Failures\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Batch Year Info\r\n                  {uploadStatus.summary?.form_batch_year && (\r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\r\n                      <div className=\"flex items-center gap-2 mb-2\">\r\n                        <BarChart3 className=\"h-5 w-5 text-blue-600\" />\r\n                        <span className=\"font-medium text-blue-800\">\r\n                          Form Information\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"text-sm text-blue-700\">\r\n                        This form is configured for{\" \"}\r\n                        <strong>\r\n                          Batch {uploadStatus.summary.form_batch_year}\r\n                        </strong>{\" \"}\r\n                        students only.\r\n                        {uploadStatus.summary.year_mismatches > 0 && (\r\n                          <span className=\"text-purple-700 ml-2\">\r\n                            {uploadStatus.summary.year_mismatches} records were\r\n                            rejected due to batch year mismatch.\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )} */}\r\n                  {/* Batch Year Info */}\r\n                  {uploadStatus.summary?.form_batch_year && (\r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\r\n                      <div className=\"flex items-center gap-2 mb-2\">\r\n                        <BarChart3 className=\"h-5 w-5 text-blue-600\" />\r\n                        <span className=\"font-medium text-blue-800\">\r\n                          Form Information\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"text-sm text-blue-700 space-y-2\">\r\n                        <div>\r\n                          This form is configured for{\" \"}\r\n                          <strong>\r\n                            Batch {uploadStatus.summary.form_batch_year}\r\n                          </strong>{\" \"}\r\n                          students only.\r\n                        </div>\r\n\r\n                        {/* Year Mismatch Info */}\r\n                        {uploadStatus.summary.year_mismatches > 0 && (\r\n                          <div className=\"text-purple-700\">\r\n                            ⚠ {uploadStatus.summary.year_mismatches} records\r\n                            were rejected due to batch year mismatch.\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Eligibility Status */}\r\n                        {uploadStatus.summary.has_company_eligibility && (\r\n                          <div className=\"text-green-700 font-medium\">\r\n                            ✓ Company eligibility verified for all uploaded\r\n                            students\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Eligibility Failures */}\r\n                        {uploadStatus.summary.eligibility_failures > 0 && (\r\n                          <div className=\"text-red-700 font-medium\">\r\n                            ✗ {uploadStatus.summary.eligibility_failures}{\" \"}\r\n                            students failed eligibility criteria for this\r\n                            company\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Success Rate Progress Bar */}\r\n                  <div className=\"bg-gray-50 border border-gray-200 rounded-xl p-4\">\r\n                    <div className=\"flex justify-between items-center mb-2\">\r\n                      <span className=\"text-sm font-medium text-gray-700\">\r\n                        Success Rate\r\n                      </span>\r\n                      <span className=\"text-sm text-gray-600\">\r\n                        {uploadStatus.summary?.total > 0\r\n                          ? Math.round(\r\n                              (uploadStatus.summary.successful /\r\n                                uploadStatus.summary.total) *\r\n                                100\r\n                            )\r\n                          : 0}\r\n                        %\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"w-full bg-gray-200 rounded-full h-3\">\r\n                      <div\r\n                        className=\"bg-gradient-to-r from-green-500 to-green-600 h-3 rounded-full transition-all duration-1000\"\r\n                        style={{\r\n                          width: `${\r\n                            uploadStatus.summary?.total > 0\r\n                              ? (uploadStatus.summary.successful /\r\n                                  uploadStatus.summary.total) *\r\n                                100\r\n                              : 0\r\n                          }%`,\r\n                        }}\r\n                      ></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Details Tab */}\r\n              {activeTab === \"details\" && (\r\n                <div className=\"space-y-4\">\r\n                  {/* Filter Controls */}\r\n                  <div className=\"flex flex-wrap gap-3 items-center justify-between\">\r\n                    <div className=\"flex gap-2\">\r\n                      <button\r\n                        onClick={() => setStatusFilter(\"all\")}\r\n                        className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${\r\n                          statusFilter === \"all\"\r\n                            ? \"bg-blue-100 text-blue-700 border border-blue-300\"\r\n                            : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\r\n                        }`}\r\n                      >\r\n                        All ({uploadStatus.details?.length || 0})\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setStatusFilter(\"success\")}\r\n                        className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${\r\n                          statusFilter === \"success\"\r\n                            ? \"bg-green-100 text-green-700 border border-green-300\"\r\n                            : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\r\n                        }`}\r\n                      >\r\n                        Success ({uploadStatus.summary?.successful || 0})\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setStatusFilter(\"error\")}\r\n                        className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${\r\n                          statusFilter === \"error\"\r\n                            ? \"bg-red-100 text-red-700 border border-red-300\"\r\n                            : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\r\n                        }`}\r\n                      >\r\n                        Errors ({uploadStatus.summary?.invalid || 0})\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setStatusFilter(\"duplicate\")}\r\n                        className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${\r\n                          statusFilter === \"duplicate\"\r\n                            ? \"bg-yellow-100 text-yellow-700 border border-yellow-300\"\r\n                            : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\r\n                        }`}\r\n                      >\r\n                        Duplicates ({uploadStatus.summary?.duplicates || 0})\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Results List */}\r\n                  <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n                    {getFilteredDetails().map((item, index) => (\r\n                      <div\r\n                        key={index}\r\n                        className={`border rounded-lg p-3 ${getStatusColor(item.status)}`}\r\n                      >\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"flex items-center gap-3\">\r\n                            {getStatusIcon(item.status)}\r\n                            <div>\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <span className=\"font-medium\">\r\n                                  Row {item.row}\r\n                                </span>\r\n                                {item.regNumber && (\r\n                                  <span className=\"font-mono text-sm bg-white/50 px-2 py-0.5 rounded\">\r\n                                    {item.regNumber}\r\n                                  </span>\r\n                                )}\r\n                              </div>\r\n                              <p className=\"text-sm mt-1\">{item.reason}</p>\r\n                            </div>\r\n                          </div>\r\n                          <span\r\n                            className={`text-xs font-medium px-2 py-1 rounded-full ${\r\n                              item.status === \"success\"\r\n                                ? \"bg-green-200 text-green-800\"\r\n                                : item.status === \"error\"\r\n                                  ? \"bg-red-200 text-red-800\"\r\n                                  : \"bg-yellow-200 text-yellow-800\"\r\n                            }`}\r\n                          >\r\n                            {item.status}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n\r\n                    {getFilteredDetails().length === 0 && (\r\n                      <div className=\"text-center py-8 text-gray-500\">\r\n                        No items found for the selected filter\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex gap-3 pt-6 border-t border-gray-200\">\r\n            <button\r\n              onClick={resetModal}\r\n              className=\"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all font-medium\"\r\n            >\r\n              {uploadStatus?.type === \"success\" ? \"Close\" : \"Cancel\"}\r\n            </button>\r\n            {!uploadStatus && file && (\r\n              <button\r\n                onClick={handleUpload}\r\n                disabled={uploading}\r\n                className=\"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-400 transition-all font-medium shadow-lg disabled:shadow-none flex items-center justify-center gap-2\"\r\n              >\r\n                {uploading ? (\r\n                  <>\r\n                    <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                    Processing...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Upload className=\"h-5 w-5\" />\r\n                    Upload & Process\r\n                  </>\r\n                )}\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadModal;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1457, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acer/Desktop/deploy%20-%20Copy/soetcgdc/frontend/app/form-responses/DataViewModal.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  Trash2,\r\n  X,\r\n  Database,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Download,\r\n  AlertCircle,\r\n} from \"lucide-react\";\r\nimport axios from \"axios\";\r\nimport * as XLSX from \"xlsx\";\r\nconst backendUrl = process.env.NEXT_PUBLIC_BACKEND_URL;\r\n\r\nconst ModernDataViewModal = ({ selectedForm, setShowDataModal }) => {\r\n  const [formData, setFormData] = useState([]);\r\n  const [pagination, setPagination] = useState({\r\n    page: 1,\r\n    limit: 20,\r\n    total: 0,\r\n    pages: 0,\r\n  });\r\n  const [loadingData, setLoadingData] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Fetch form data\r\n  const fetchFormData = async (page = 1) => {\r\n    try {\r\n      setLoadingData(true);\r\n      setError(null);\r\n      const response = await axios.get(\r\n        `${backendUrl}/forms/${selectedForm.id}/data?page=${page}&limit=${pagination.limit}`\r\n      );\r\n\r\n      setFormData(response.data.data || []);\r\n      setPagination((prev) => ({\r\n        ...prev,\r\n        ...response.data.pagination,\r\n      }));\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Failed to fetch form data\");\r\n      console.error(\"Error fetching form data:\", err);\r\n    } finally {\r\n      setLoadingData(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selectedForm) {\r\n      fetchFormData(pagination.page);\r\n    }\r\n  }, [selectedForm, pagination.page]);\r\n\r\n  const columns =\r\n    formData.length > 0\r\n      ? Object.keys(formData[0]).filter((key) => key !== \"id\")\r\n      : [];\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this record?\")) return;\r\n\r\n    try {\r\n      setError(null);\r\n      await axios.delete(\r\n        `${backendUrl}/forms/${selectedForm.id}/responses/${id}`\r\n      );\r\n      fetchFormData(pagination.page);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Failed to delete record\");\r\n      console.error(\"Error deleting record:\", err);\r\n    }\r\n  };\r\n\r\n  const handlePageChange = (newPage) => {\r\n    setPagination((prev) => ({ ...prev, page: newPage }));\r\n  };\r\n\r\n  const resetModal = () => {\r\n    setShowDataModal(false);\r\n    setError(null);\r\n  };\r\n\r\n  const formatColumnName = (column) => {\r\n    return column.replace(/_/g, \" \").replace(/\\b\\w/g, (l) => l.toUpperCase());\r\n  };\r\n\r\n  const getColumnType = (column) => {\r\n    // First check if the value looks like a timestamp\r\n    const isTimestamp = (value) => {\r\n      return /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.*Z$/.test(value);\r\n    };\r\n\r\n    // Check column name for date-related keywords\r\n    if (\r\n      column.toLowerCase().includes(\"date\") ||\r\n      column.toLowerCase().includes(\"time\") ||\r\n      column === \"uploaded_at\" ||\r\n      column === \"dob\" ||\r\n      column === \"birth_date\"\r\n    ) {\r\n      return \"date\";\r\n    }\r\n\r\n    // Check actual value in formData for timestamp format\r\n    if (\r\n      formData.length > 0 &&\r\n      formData[0][column] &&\r\n      isTimestamp(formData[0][column])\r\n    ) {\r\n      return \"date\";\r\n    }\r\n\r\n    // Other type checks\r\n    if (column.includes(\"email\")) {\r\n      return \"email\";\r\n    }\r\n    if (column.includes(\"phone\") || column.includes(\"mobile\")) {\r\n      return \"tel\";\r\n    }\r\n    return \"text\";\r\n  };\r\n\r\n  // Update the formatDateTime function to be more precise\r\n  const formatDateTime = (value) => {\r\n    if (!value) return \"\";\r\n\r\n    try {\r\n      const date = new Date(value);\r\n      if (isNaN(date)) return value;\r\n\r\n      return new Intl.DateTimeFormat(\"en-US\", {\r\n        year: \"numeric\",\r\n        month: \"short\",\r\n        day: \"2-digit\",\r\n        hour: \"2-digit\",\r\n        minute: \"2-digit\",\r\n        second: \"2-digit\",\r\n        hour12: true,\r\n      }).format(date);\r\n    } catch (error) {\r\n      return value;\r\n    }\r\n  };\r\n\r\n  const handleExport = async () => {\r\n    try {\r\n      // Show loading state\r\n      setLoadingData(true);\r\n      setError(null);\r\n      // Fetch all data for export (without pagination)\r\n      const response = await axios.get(\r\n        `${backendUrl}/forms/${selectedForm.id}/data?page=1&limit=9999`\r\n      );\r\n\r\n      const dataToExport = response.data.data || [];\r\n\r\n      if (dataToExport.length === 0) {\r\n        setError(\"No data available to export\");\r\n        return;\r\n      }\r\n\r\n      // Remove id column and prepare data\r\n      const exportData = dataToExport.map((row) => {\r\n        const cleanRow = { ...row };\r\n        delete cleanRow.id;\r\n\r\n        // Format date fields\r\n        Object.keys(cleanRow).forEach((key) => {\r\n          if (getColumnType(key) === \"date\") {\r\n            cleanRow[key] = formatDateTime(cleanRow[key]);\r\n          }\r\n        });\r\n\r\n        return cleanRow;\r\n      });\r\n\r\n      try {\r\n        // Create worksheet\r\n        const ws = XLSX.utils.json_to_sheet(exportData);\r\n\r\n        // Create workbook\r\n        const wb = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(wb, ws, \"Form Data\");\r\n\r\n        // Generate filename\r\n        const fileName = `${selectedForm.title\r\n          .replace(/[^a-z0-9]/gi, \"_\")\r\n          .toLowerCase()}_${new Date().toISOString().split(\"T\")[0]}.xlsx`;\r\n\r\n        // Save file\r\n        XLSX.writeFile(wb, fileName);\r\n      } catch (xlsxError) {\r\n        setError(\"Failed to generate Excel file\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Export error:\", err);\r\n      setError(\r\n        err.response?.data?.message || err.message || \"Failed to export data\"\r\n      );\r\n    } finally {\r\n      setLoadingData(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-7xl max-h-[90vh] flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"bg-gradient-to-r from-slate-800 to-slate-900 px-6 py-4 text-white relative\">\r\n          <div className=\"absolute top-4 right-4 flex items-center gap-2\">\r\n            <button\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                handleExport();\r\n              }}\r\n              disabled={loadingData || formData.length === 0}\r\n              className=\"p-1.5 hover:bg-white/20 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1\"\r\n            >\r\n              <Download className=\"h-5 w-5\" />\r\n              <h3 className=\"text-md font-semibold\">Export</h3>\r\n            </button>\r\n            <button\r\n              onClick={resetModal}\r\n              className=\"p-1.5 hover:bg-white/20 rounded-lg transition-colors\"\r\n            >\r\n              <X className=\"h-5 w-5\" />\r\n            </button>\r\n          </div>\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-white/20 rounded-lg\">\r\n              <Database className=\"h-5 w-5\" />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"text-xl font-semibold\">Form Data</h3>\r\n              <p className=\"text-slate-300 text-sm\">{selectedForm?.title}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Error Display */}\r\n        {error && (\r\n          <div className=\"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-xl\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <AlertCircle className=\"h-5 w-5 text-red-500 flex-shrink-0\" />\r\n              <p className=\"text-red-700 font-medium\">{error}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Main Content */}\r\n        <div className=\"flex-1 p-6 overflow-auto\">\r\n          {loadingData ? (\r\n            <div className=\"text-center py-16\">\r\n              <div className=\"relative inline-flex items-center justify-center w-16 h-16 mb-4\">\r\n                <div className=\"absolute inset-0 rounded-full border-4 border-slate-200\"></div>\r\n                <div className=\"absolute inset-0 rounded-full border-4 border-blue-600 border-t-transparent animate-spin\"></div>\r\n                <Database className=\"h-6 w-6 text-blue-600\" />\r\n              </div>\r\n              <p className=\"text-slate-600 font-medium\">Loading form data...</p>\r\n            </div>\r\n          ) : formData.length === 0 ? (\r\n            <div className=\"text-center py-16\">\r\n              <div className=\"p-4 bg-slate-100 rounded-full w-20 h-20 mx-auto mb-6 flex items-center justify-center\">\r\n                <Database className=\"h-8 w-8 text-slate-400\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-semibold text-slate-900 mb-2\">\r\n                No data available\r\n              </h3>\r\n              <p className=\"text-slate-600 mb-6\">\r\n                This form doesn&apos;t have any submitted responses yet.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden\">\r\n              <div className=\"overflow-auto\">\r\n                <table className=\"w-full\">\r\n                  <thead>\r\n                    <tr className=\"bg-slate-50 border-b border-slate-200\">\r\n                      {columns.map((column) => (\r\n                        <th\r\n                          key={column}\r\n                          className=\"px-6 py-4 text-left text-sm font-semibold text-slate-700 uppercase tracking-wider\"\r\n                        >\r\n                          {formatColumnName(column)}\r\n                        </th>\r\n                      ))}\r\n                      <th className=\"px-6 py-4 text-center text-sm font-semibold text-slate-700 uppercase tracking-wider w-32\">\r\n                        Actions\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"divide-y divide-slate-100\">\r\n                    {formData.map((row) => (\r\n                      <tr\r\n                        key={row.id}\r\n                        className={`hover:bg-slate-50 transition-colors`}\r\n                      >\r\n                        {columns.map((column) => (\r\n                          <td\r\n                            key={column}\r\n                            className=\"px-6 py-4 text-sm text-slate-900\"\r\n                          >\r\n                            <div\r\n                              className=\"max-w-xs truncate\"\r\n                              title={row[column]}\r\n                            >\r\n                              {getColumnType(column) === \"date\"\r\n                                ? formatDateTime(row[column])\r\n                                : row[column]}\r\n                            </div>\r\n                          </td>\r\n                        ))}\r\n                        <td className=\"px-6 py-4\">\r\n                          <div className=\"flex gap-1 justify-center\">\r\n                            <button\r\n                              onClick={() => handleDelete(row.id)}\r\n                              className=\"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors\"\r\n                              title=\"Delete record\"\r\n                            >\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Pagination Footer */}\r\n        {formData.length > 0 && (\r\n          <div className=\"bg-slate-50 border-t border-slate-200 px-6 py-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"text-sm text-slate-600\">\r\n                Showing{\" \"}\r\n                <span className=\"font-medium\">\r\n                  {(pagination.page - 1) * pagination.limit + 1}\r\n                </span>{\" \"}\r\n                to{\" \"}\r\n                <span className=\"font-medium\">\r\n                  {Math.min(\r\n                    pagination.page * pagination.limit,\r\n                    pagination.total\r\n                  )}\r\n                </span>{\" \"}\r\n                of <span className=\"font-medium\">{pagination.total}</span>{\" \"}\r\n                records\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-3\">\r\n                <button\r\n                  onClick={() => handlePageChange(pagination.page - 1)}\r\n                  disabled={pagination.page === 1}\r\n                  className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  <ChevronLeft className=\"h-4 w-4\" />\r\n                  Previous\r\n                </button>\r\n\r\n                {/* Replace your existing pagination buttons with this */}\r\n                <div className=\"flex items-center gap-1\">\r\n                  {pagination.pages > 0 && pagination.page > 2 && (\r\n                    <>\r\n                      <button\r\n                        key=\"first-page\"\r\n                        onClick={() => handlePageChange(1)}\r\n                        className=\"px-3 py-2 text-sm font-medium rounded-lg text-slate-600 hover:bg-slate-100\"\r\n                      >\r\n                        1\r\n                      </button>\r\n                      {pagination.page > 3 && (\r\n                        <span className=\"px-3 py-2 text-sm text-slate-600\">\r\n                          ...\r\n                        </span>\r\n                      )}\r\n                    </>\r\n                  )}\r\n\r\n                  {Array.from({ length: pagination.pages }, (_, i) => {\r\n                    const page = i + 1;\r\n                    // Show current page and one page before and after\r\n                    if (\r\n                      page === 1 ||\r\n                      page === pagination.pages ||\r\n                      (page >= pagination.page - 1 &&\r\n                        page <= pagination.page + 1)\r\n                    ) {\r\n                      return (\r\n                        <button\r\n                          key={`page-${page}`}\r\n                          onClick={() => handlePageChange(page)}\r\n                          className={`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${\r\n                            pagination.page === page\r\n                              ? \"bg-blue-600 text-white\"\r\n                              : \"text-slate-600 hover:bg-slate-100\"\r\n                          }`}\r\n                        >\r\n                          {page}\r\n                        </button>\r\n                      );\r\n                    }\r\n                    return null;\r\n                  })}\r\n\r\n                  {pagination.pages > 0 &&\r\n                    pagination.page < pagination.pages - 1 && (\r\n                      <>\r\n                        {pagination.page < pagination.pages - 2 && (\r\n                          <span\r\n                            key=\"last-ellipsis\"\r\n                            className=\"px-3 py-2 text-sm text-slate-600\"\r\n                          >\r\n                            ...\r\n                          </span>\r\n                        )}\r\n                        <button\r\n                          key=\"last-page\"\r\n                          onClick={() => handlePageChange(pagination.pages)}\r\n                          className=\"px-3 py-2 text-sm font-medium rounded-lg text-slate-600 hover:bg-slate-100\"\r\n                        >\r\n                          {pagination.pages}\r\n                        </button>\r\n                      </>\r\n                    )}\r\n                </div>\r\n\r\n                <button\r\n                  onClick={() => handlePageChange(pagination.page + 1)}\r\n                  disabled={pagination.page >= (pagination.pages || 1)}\r\n                  className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  Next\r\n                  <ChevronRight className=\"h-4 w-4\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default ModernDataViewModal;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2169, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acer/Desktop/deploy%20-%20Copy/soetcgdc/frontend/app/form-responses/CreateFormModal.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  X,\r\n  FileText,\r\n  Calendar,\r\n  Building2,\r\n  Briefcase,\r\n  AlertCircle,\r\n} from \"lucide-react\";\r\nconst backendUrl = process.env.NEXT_PUBLIC_BACKEND_URL;\r\n\r\nconst CreateFormModal = ({\r\n  setShowCreateForm,\r\n  fetchForms,\r\n  selectedBatch,\r\n  isEditing = false,\r\n  formData: initialFormData = null,\r\n}) => {\r\n  const [formData, setFormData] = useState(\r\n    initialFormData\r\n      ? {\r\n          title: initialFormData.title || \"\",\r\n          event_id: initialFormData.event_id?.toString() || \"\",\r\n          batch_year: selectedBatch,\r\n        }\r\n      : {\r\n          title: \"\",\r\n          event_id: \"\",\r\n          batch_year: selectedBatch,\r\n        }\r\n  );\r\n\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [events, setEvents] = useState([]);\r\n  const [selectedCompanyId, setSelectedCompanyId] = useState(\"\");\r\n\r\n  // Fetch fresh events when modal opens\r\n  useEffect(() => {\r\n    if (selectedBatch) {\r\n      const loadEvents = async () => {\r\n        try {\r\n          // Add include_event parameter when in edit mode\r\n          const url =\r\n            isEditing && formData.event_id\r\n              ? `${backendUrl}/forms/events/${selectedBatch}?include_event=${formData.event_id}`\r\n              : `${backendUrl}/forms/events/${selectedBatch}`;\r\n\r\n          const response = await axios.get(url);\r\n          setEvents(response.data.data || []);\r\n        } catch (error) {\r\n          console.error(\"Error fetching events:\", error);\r\n        }\r\n      };\r\n\r\n      loadEvents();\r\n    }\r\n  }, [selectedBatch, isEditing]);\r\n\r\n  // Add this debug effect to monitor the form data\r\n  useEffect(() => {\r\n    if (isEditing) {\r\n      console.log(\"Initial Form Data received:\", initialFormData);\r\n      console.log(\"Form Data set:\", formData);\r\n    }\r\n  }, []);\r\n\r\n  // Process events to group by company\r\n  const companiesMap = events.reduce((acc, event) => {\r\n    const companyId = event.company_id;\r\n    const companyName = event.company_name || \"No Company\";\r\n\r\n    if (!acc[companyId]) {\r\n      acc[companyId] = {\r\n        id: companyId,\r\n        name: companyName,\r\n        events: [],\r\n      };\r\n    }\r\n    acc[companyId].events.push(event);\r\n    return acc;\r\n  }, {});\r\n\r\n  const companies = Object.values(companiesMap);\r\n\r\n  // Filter events by selected company\r\n  const filteredEvents = selectedCompanyId\r\n    ? events.filter((event) => event.company_id == selectedCompanyId)\r\n    : [];\r\n\r\n  // Auto-select company if editing and event has a company\r\n  useEffect(() => {\r\n    if (isEditing && formData.event_id && events.length > 0) {\r\n      const selectedEvent = events.find((e) => e.id == formData.event_id);\r\n      if (selectedEvent?.company_id) {\r\n        setSelectedCompanyId(selectedEvent.company_id.toString());\r\n      }\r\n    }\r\n  }, [isEditing, formData.event_id, events]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.title.trim()) {\r\n      setError(\"Form title is required\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSubmitting(true);\r\n      setError(null);\r\n\r\n      const payload = {\r\n        title: formData.title.trim(),\r\n        type: formData.type,\r\n        event_id: formData.event_id || null,\r\n        batch_year: selectedBatch,\r\n      };\r\n\r\n      const url = isEditing\r\n        ? `${backendUrl}/forms/${initialFormData.id}`\r\n        : `${backendUrl}/forms`;\r\n\r\n      const response = isEditing\r\n        ? await axios.put(url, payload)\r\n        : await axios.post(url, payload);\r\n\r\n      // Only refresh forms list\r\n      await fetchForms();\r\n      setShowCreateForm(false);\r\n    } catch (err) {\r\n      const errorMessage =\r\n        err.response?.data?.message ||\r\n        err.message ||\r\n        `Failed to ${isEditing ? \"update\" : \"create\"} form`;\r\n      setError(errorMessage);\r\n      console.error(`Error ${isEditing ? \"updating\" : \"creating\"} form:`, err);\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setShowCreateForm(false);\r\n    setError(null);\r\n  };\r\n\r\n  const selectedEvent = events.find((event) => event.id == formData.event_id);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-slate-100\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-blue-100 rounded-xl\">\r\n              <FileText className=\"h-5 w-5 text-blue-600\" />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"text-xl font-bold text-slate-900\">\r\n                {isEditing ? \"Edit Form\" : \"Create New Form\"}\r\n              </h3>\r\n              <p className=\"text-sm text-slate-600\">\r\n                For Batch {selectedBatch}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"p-2 hover:bg-slate-100 rounded-lg transition-colors duration-200\"\r\n            disabled={submitting}\r\n          >\r\n            <X className=\"h-5 w-5 text-slate-400\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Form Content */}\r\n        <div className=\"p-6 space-y-5\">\r\n          {/* Form Title */}\r\n          <div>\r\n            <label className=\"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-2\">\r\n              <FileText className=\"h-4 w-4\" />\r\n              Form Title *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm\"\r\n              value={formData.title}\r\n              onChange={(e) =>\r\n                setFormData({ ...formData, title: e.target.value })\r\n              }\r\n              placeholder=\"e.g., Goldman Sachs Application Form\"\r\n              disabled={submitting}\r\n            />\r\n          </div>\r\n\r\n          {/* Event Selection */}\r\n          <div>\r\n            <label className=\"flex items-center gap-2 text-sm font-semibold text-slate-700 mb-2\">\r\n              <Calendar className=\"h-4 w-4\" />\r\n              Related Event\r\n            </label>\r\n\r\n            {/* Company Selection */}\r\n            <div className=\"mb-3\">\r\n              <label className=\"flex items-center gap-2 text-xs font-medium text-slate-600 mb-1.5\">\r\n                <Building2 className=\"h-3.5 w-3.5\" />\r\n                Select Company First\r\n              </label>\r\n              <select\r\n                className=\"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm bg-white\"\r\n                value={selectedCompanyId}\r\n                onChange={(e) => {\r\n                  setSelectedCompanyId(e.target.value);\r\n                  setFormData({ ...formData, event_id: \"\" }); // Reset event when company changes\r\n                }}\r\n                disabled={submitting}\r\n              >\r\n                <option value=\"\">Select a company...</option>\r\n                {companies.map((company) => (\r\n                  <option key={company.id} value={company.id}>\r\n                    {company.name} ({company.events.length} event\r\n                    {company.events.length !== 1 ? \"s\" : \"\"})\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* Event Selection - Only show when company is selected */}\r\n            {selectedCompanyId && (\r\n              <div>\r\n                <label className=\"flex items-center gap-2 text-xs font-medium text-slate-600 mb-1.5\">\r\n                  <Calendar className=\"h-3.5 w-3.5\" />\r\n                  Select Event\r\n                </label>\r\n                <select\r\n                  className=\"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm bg-white\"\r\n                  value={formData.event_id}\r\n                  onChange={(e) =>\r\n                    setFormData({ ...formData, event_id: e.target.value })\r\n                  }\r\n                  disabled={submitting}\r\n                >\r\n                  <option value=\"\">No event (standalone form)</option>\r\n                  {filteredEvents.map((event) => (\r\n                    <option key={event.id} value={event.id}>\r\n                      {event.title}\r\n                      {event.position_info && ` - ${event.position_info}`}\r\n                      {event.event_date &&\r\n                        ` (${new Date(event.event_date).toLocaleDateString()})`}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n\r\n            {/* Event Details Preview */}\r\n            {selectedEvent && (\r\n              <div className=\"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200\">\r\n                <div className=\"text-sm\">\r\n                  <div className=\"flex items-center gap-2 text-blue-800 font-medium mb-1\">\r\n                    <Calendar className=\"h-3 w-3\" />\r\n                    {selectedEvent.title}\r\n                  </div>\r\n                  <div className=\"space-y-1\">\r\n                    {selectedEvent.company_name && (\r\n                      <div className=\"flex items-center gap-2 text-blue-700\">\r\n                        <Building2 className=\"h-3 w-3\" />\r\n                        <span>{selectedEvent.company_name}</span>\r\n                      </div>\r\n                    )}\r\n                    {selectedEvent.position_info && (\r\n                      <div className=\"flex items-center gap-2 text-blue-700\">\r\n                        <Briefcase className=\"h-3 w-3\" />\r\n                        <span>{selectedEvent.position_info}</span>\r\n                      </div>\r\n                    )}\r\n                    {selectedEvent.event_date && (\r\n                      <div className=\"text-blue-600 text-xs\">\r\n                        Date:{\" \"}\r\n                        {new Date(\r\n                          selectedEvent.event_date\r\n                        ).toLocaleDateString()}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Error Message */}\r\n          {error && (\r\n            <div className=\"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-xl\">\r\n              <AlertCircle className=\"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5\" />\r\n              <div>\r\n                <p className=\"text-red-700 text-sm font-medium\">Error</p>\r\n                <p className=\"text-red-600 text-sm\">{error}</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleClose}\r\n              className=\"flex-1 px-4 py-3 border-2 border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 hover:border-slate-300 transition-all duration-200 font-medium text-sm\"\r\n              disabled={submitting}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleSubmit}\r\n              disabled={submitting || !formData.title.trim()}\r\n              className=\"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 disabled:from-slate-400 disabled:to-slate-400 transition-all duration-200 font-medium text-sm shadow-lg hover:shadow-xl disabled:shadow-none\"\r\n            >\r\n              {submitting ? (\r\n                <div className=\"flex items-center justify-center gap-2\">\r\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\"></div>\r\n                  {isEditing ? \"Updating...\" : \"Creating...\"}\r\n                </div>\r\n              ) : isEditing ? (\r\n                \"Update Form\"\r\n              ) : (\r\n                \"Create Form\"\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateFormModal;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2775, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acer/Desktop/deploy%20-%20Copy/soetcgdc/frontend/app/form-responses/DeleteFormModal.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { AlertTriangle, X, Trash2, FileText, Users } from \"lucide-react\";\r\nimport axios from \"axios\";\r\nconst backendUrl = process.env.NEXT_PUBLIC_BACKEND_URL;\r\n\r\nconst DeleteFormModal = ({ isOpen, onClose, form, onFormDeleted }) => {\r\n  const [confirmationText, setConfirmationText] = useState(\"\");\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [isValid, setIsValid] = useState(false);\r\n\r\n  // Expected confirmation text\r\n  const expectedText = form?.title;\r\n\r\n  useEffect(() => {\r\n    setIsValid(confirmationText === expectedText);\r\n  }, [confirmationText, expectedText]);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      setConfirmationText(\"\");\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleDeleteForm = async (e) => {\r\n    e.preventDefault();\r\n    if (!isValid) return;\r\n\r\n    try {\r\n      setIsDeleting(true);\r\n      await axios.delete(`${backendUrl}/forms/${form.id}`);\r\n      onFormDeleted();\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(\"Error deleting form:\", error);\r\n      alert(\"Failed to delete form\");\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen || !form) return null;\r\n\r\n  return (\r\n    <div className=\"fixed h-full inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl border border-gray-100 p-8 w-full max-w-md mx-4\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center\">\r\n              <AlertTriangle className=\"h-5 w-5 text-red-600\" />\r\n            </div>\r\n            <h2 className=\"text-xl font-bold text-gray-900\">Delete Form</h2>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full p-2 transition-all duration-200\"\r\n            disabled={isDeleting}\r\n          >\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Warning Message */}\r\n        <div className=\"mb-6 p-4 bg-gradient-to-r from-red-50 to-rose-50 rounded-xl border border-red-200\">\r\n          <div className=\"flex items-start space-x-3\">\r\n            <AlertTriangle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\r\n            <div>\r\n              <p className=\"text-sm font-medium text-red-800 mb-2\">\r\n                This action cannot be undone\r\n              </p>\r\n              <p className=\"text-sm text-red-700\">\r\n                This will permanently delete{\" \"}\r\n                <span className=\"font-semibold\">{form.title}</span> and all\r\n                associated responses.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Form Info Card */}\r\n        <div className=\"mb-6 p-4 bg-gray-50 rounded-xl\">\r\n          <div className=\"text-center\">\r\n            <div className=\"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3\">\r\n              <FileText className=\"h-6 w-6 text-gray-600\" />\r\n            </div>\r\n            <h3 className=\"font-semibold text-gray-900 mb-1\">{form.title}</h3>\r\n            <p className=\"text-sm text-gray-600 mb-1\">{form.type}</p>\r\n            <p className=\"text-sm text-gray-600\">\r\n              <Users className=\"h-4 w-4 inline mr-1\" />\r\n              {form.total_responses || 0} Response(s)\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Confirmation Form */}\r\n        <form onSubmit={handleDeleteForm}>\r\n          <div className=\"mb-6\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              To confirm deletion, type{\" \"}\r\n              <code className=\"px-2 py-1 bg-gray-100 rounded text-sm font-mono text-red-600\">\r\n                {expectedText}\r\n              </code>{\" \"}\r\n              below:\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={confirmationText}\r\n              onChange={(e) => setConfirmationText(e.target.value)}\r\n              className={`w-full px-4 py-3 border rounded-xl transition-all duration-200 font-mono ${\r\n                confirmationText.length > 0\r\n                  ? isValid\r\n                    ? \"border-green-300 bg-green-50 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\r\n                    : \"border-red-300 bg-red-50 focus:ring-2 focus:ring-red-500 focus:border-red-500\"\r\n                  : \"border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              }`}\r\n              placeholder=\"Type to confirm...\"\r\n              disabled={isDeleting}\r\n              autoComplete=\"off\"\r\n              spellCheck=\"false\"\r\n            />\r\n            {confirmationText.length > 0 && !isValid && (\r\n              <p className=\"mt-2 text-sm text-red-600\">\r\n                Text doesn&apos;t match\r\n              </p>\r\n            )}\r\n            {isValid && (\r\n              <p className=\"mt-2 text-sm text-green-600 flex items-center space-x-1\">\r\n                <span className=\"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center\">\r\n                  <span className=\"w-2 h-1 bg-white rounded-full\"></span>\r\n                </span>\r\n                <span>Confirmed - ready to delete</span>\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex space-x-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"flex-1 px-4 py-3 border border-gray-300 rounded-xl text-gray-700 font-medium hover:bg-gray-50 hover:border-gray-400 transition-all duration-200\"\r\n              disabled={isDeleting}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={!isValid || isDeleting}\r\n              className=\"flex-1 px-4 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white font-medium rounded-xl hover:from-red-700 hover:to-red-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl disabled:shadow-none flex items-center justify-center space-x-2\"\r\n            >\r\n              {isDeleting ? (\r\n                <>\r\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\"></div>\r\n                  <span>Deleting...</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Trash2 className=\"h-4 w-4\" />\r\n                  <span>Delete Form</span>\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeleteFormModal;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3182, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acer/Desktop/deploy%20-%20Copy/soetcgdc/frontend/app/form-responses/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useBatchContext } from \"../../context/BatchContext\";\r\nimport {\r\n  Plus,\r\n  Upload,\r\n  Eye,\r\n  Trash2,\r\n  Calendar,\r\n  Users,\r\n  Building2,\r\n  Briefcase,\r\n  FileText,\r\n  Target,\r\n  Search,\r\n  Edit,\r\n  X,\r\n  ArrowLeft,\r\n} from \"lucide-react\";\r\nimport * as XLSX from \"xlsx\";\r\nconst backendUrl = process.env.NEXT_PUBLIC_BACKEND_URL;\r\n\r\nimport UploadModal from \"./UploadModal\";\r\nimport DataViewModal from \"./DataViewModal\";\r\nimport CreateFormModal from \"./CreateFormModal\";\r\nimport DeleteFormModal from \"./DeleteFormModal\";\r\nimport axios from \"axios\";\r\n\r\nconst FormManagementSystem = () => {\r\n  const { selectedBatch } = useBatchContext();\r\n  const [forms, setForms] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [filterType, setFilterType] = useState(\"all\");\r\n  const [filterCompany, setFilterCompany] = useState(\"all\");\r\n  const [filterPosition, setFilterPosition] = useState(\"all\");\r\n  const [showCreateForm, setShowCreateForm] = useState(false);\r\n  const [showUploadModal, setShowUploadModal] = useState(false);\r\n  const [showDataModal, setShowDataModal] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [selectedForm, setSelectedForm] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [showEditForm, setShowEditForm] = useState(false);\r\n\r\n  // Fetch forms directly using axios with batch context\r\n  const fetchForms = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get(`${backendUrl}/forms/${selectedBatch}`);\r\n      setForms(response.data.data || []);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(\"Failed to fetch forms\");\r\n      console.error(\"Error fetching forms:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Delete form directly\r\n  const handleDeleteForm = async (formId) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this form?\")) return;\r\n\r\n    try {\r\n      await axios.delete(`${backendUrl}/forms/${formId}`);\r\n      fetchForms(); // Refresh the forms list\r\n    } catch (err) {\r\n      setError(\"Failed to delete form\");\r\n      console.error(\"Error deleting form:\", err);\r\n    }\r\n  };\r\n\r\n  // Update the delete handler\r\n  const handleDeleteClick = (form) => {\r\n    setSelectedForm(form);\r\n    setShowDeleteModal(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selectedBatch) {\r\n      fetchForms();\r\n    }\r\n  }, [selectedBatch]);\r\n\r\n  // Get unique companies and positions for filters\r\n  const uniqueCompanies = [\r\n    ...new Set(forms.map((form) => form.company_name).filter(Boolean)),\r\n  ].sort();\r\n\r\n  const uniquePositions = [\r\n    ...new Set(\r\n      forms\r\n        .filter(\r\n          (form) =>\r\n            filterCompany === \"all\" || form.company_name === filterCompany\r\n        )\r\n        .map((form) => form.position_title)\r\n        .filter(Boolean)\r\n    ),\r\n  ].sort();\r\n\r\n  // Reset position filter when company filter changes\r\n  useEffect(() => {\r\n    if (filterCompany !== \"all\") {\r\n      const validPositions = forms\r\n        .filter((form) => form.company_name === filterCompany)\r\n        .map((form) => form.position_title)\r\n        .filter(Boolean);\r\n\r\n      if (\r\n        filterPosition !== \"all\" &&\r\n        !validPositions.includes(filterPosition)\r\n      ) {\r\n        setFilterPosition(\"all\");\r\n      }\r\n    } else {\r\n      setFilterPosition(\"all\");\r\n    }\r\n  }, [filterCompany, forms, filterPosition]);\r\n\r\n  // Filter forms\r\n  const filteredForms = forms.filter((form) => {\r\n    const matchesSearch =\r\n      form.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      form.company_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      form.event_title?.toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n    const matchesCompany =\r\n      filterCompany === \"all\" || form.company_name === filterCompany;\r\n\r\n    return matchesSearch && matchesCompany;\r\n  });\r\n\r\n  const clearAllFilters = () => {\r\n    setFilterType(\"all\");\r\n    setFilterCompany(\"all\");\r\n  };\r\n\r\n  const getTypeColor = (type) => {\r\n    const colors = {\r\n      survey: \"bg-blue-50 text-blue-700 border-blue-200\",\r\n      feedback: \"bg-emerald-50 text-emerald-700 border-emerald-200\",\r\n      application: \"bg-purple-50 text-purple-700 border-purple-200\",\r\n      registration: \"bg-amber-50 text-amber-700 border-amber-200\",\r\n    };\r\n    return colors[type] || \"bg-gray-50 text-gray-700 border-gray-200\";\r\n  };\r\n\r\n  const getResponsesBadgeColor = (responses) => {\r\n    const count = parseInt(responses);\r\n    if (count === 0) return \"bg-slate-100 text-slate-600\";\r\n    if (count < 25) return \"bg-yellow-100 text-yellow-800\";\r\n    if (count < 75) return \"bg-blue-100 text-blue-800\";\r\n    return \"bg-green-100 text-green-800\";\r\n  };\r\n\r\n  const hasActiveFilters =\r\n    searchTerm ||\r\n    filterType !== \"all\" ||\r\n    filterCompany !== \"all\" ||\r\n    filterPosition !== \"all\";\r\n\r\n  // Add this function inside FormManagementSystem component before the return statement\r\n  const handleExportForms = () => {\r\n    try {\r\n      // Prepare data for export\r\n      const exportData = forms.map((form) => ({\r\n        \"Form Title\": form.title,\r\n        Type: form.type.charAt(0).toUpperCase() + form.type.slice(1),\r\n        Company: form.company_name || \"-\",\r\n        Position: form.position_title || \"-\",\r\n        \"Total Responses\": form.total_responses || 0,\r\n        \"Created Date\": new Date(form.created_at).toLocaleDateString(),\r\n      }));\r\n\r\n      // Create worksheet\r\n      const ws = XLSX.utils.json_to_sheet(exportData);\r\n\r\n      // Set column widths\r\n      ws[\"!cols\"] = [\r\n        { wch: 40 }, // Form Title\r\n        { wch: 15 }, // Type\r\n        { wch: 25 }, // Company\r\n        { wch: 25 }, // Position\r\n        { wch: 15 }, // Total Responses\r\n        { wch: 15 }, // Created Date\r\n      ];\r\n\r\n      // Create workbook\r\n      const wb = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(wb, ws, `Forms - Batch ${selectedBatch}`);\r\n\r\n      // Generate filename\r\n      const fileName = `forms_report_batch_${selectedBatch}_${\r\n        new Date().toISOString().split(\"T\")[0]\r\n      }.xlsx`;\r\n\r\n      // Save file\r\n      XLSX.writeFile(wb, fileName);\r\n    } catch (error) {\r\n      console.error(\"Error exporting forms:\", error);\r\n      alert(\"Failed to export forms data\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\">\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        {/* Header */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6\">\r\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n            <div className=\"flex items-start gap-4\">\r\n              <button\r\n                onClick={() => (window.location.href = \"/\")}\r\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n              >\r\n                <ArrowLeft className=\"h-6 w-6 text-gray-600\" />\r\n              </button>\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n                  Form Management\r\n                </h1>\r\n                <p className=\"text-gray-600\">\r\n                  Track and manage application forms, surveys and feedback -\r\n                  Batch {selectedBatch}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-3\">\r\n              <button\r\n                onClick={handleExportForms}\r\n                className=\"bg-green-600 hover:bg-green-700 text-white px-6 py-2.5 rounded-lg flex items-center gap-2 transition-all duration-200 shadow-sm hover:shadow-md\"\r\n              >\r\n                <FileText className=\"h-4 w-4\" />\r\n                Export Forms\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowCreateForm(true);\r\n                  setError(null);\r\n                }}\r\n                className=\"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-2.5 rounded-lg flex items-center gap-2 transition-all duration-200 shadow-sm hover:shadow-md\"\r\n              >\r\n                <Plus className=\"h-4 w-4\" />\r\n                Create Form\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Search & Filters */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6\">\r\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n            <div className=\"flex flex-col sm:flex-row gap-3 flex-1\">\r\n              <div className=\"relative flex-1\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search forms...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <select\r\n                value={filterCompany}\r\n                onChange={(e) => setFilterCompany(e.target.value)}\r\n                className=\"px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Companies</option>\r\n                {uniqueCompanies.map((company) => (\r\n                  <option key={company} value={company}>\r\n                    {company}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {hasActiveFilters && (\r\n              <button\r\n                onClick={clearAllFilters}\r\n                className=\"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg flex items-center gap-2 transition-colors\"\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n                Clear Filters\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Compact Forms List */}\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-slate-200\">\r\n          <div className=\"p-4 border-b border-slate-200\">\r\n            <h2 className=\"text-lg font-semibold text-slate-900\">Forms</h2>\r\n          </div>\r\n\r\n          <div className=\"divide-y divide-slate-100 max-h-96 overflow-y-auto\">\r\n            {loading ? (\r\n              <div className=\"p-8 text-center\">\r\n                <div className=\"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto mb-3\"></div>\r\n                <p className=\"text-slate-500 text-sm\">Loading forms...</p>\r\n              </div>\r\n            ) : filteredForms.length === 0 ? (\r\n              <div className=\"p-8 text-center\">\r\n                <FileText className=\"h-8 w-8 text-slate-300 mx-auto mb-3\" />\r\n                <p className=\"text-slate-500\">No forms found</p>\r\n                {hasActiveFilters && (\r\n                  <button\r\n                    onClick={clearAllFilters}\r\n                    className=\"text-blue-600 hover:text-blue-700 text-sm mt-2\"\r\n                  >\r\n                    Clear filters to see all forms\r\n                  </button>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              filteredForms.map((form) => (\r\n                <div\r\n                  key={form.id}\r\n                  className=\"p-4 hover:bg-slate-50 transition-colors\"\r\n                >\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex items-center gap-3 mb-2\">\r\n                        <h3 className=\"font-semibold text-slate-900 truncate\">\r\n                          {form.title}\r\n                        </h3>\r\n                        <span\r\n                          className={`px-2 py-1 text-xs font-medium rounded-full border ${getTypeColor(form.type)}`}\r\n                        >\r\n                          {form.type}\r\n                        </span>\r\n                        <span\r\n                          className={`px-2 py-1 text-xs font-medium rounded-full ${getResponsesBadgeColor(form.total_responses)}`}\r\n                        >\r\n                          {form.total_responses} responses\r\n                        </span>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center gap-4 text-xs text-slate-500\">\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <Building2 className=\"h-3 w-3\" />\r\n                          <span>{form.company_name}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <Briefcase className=\"h-3 w-3\" />\r\n                          <span>{form.position_title}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <Calendar className=\"h-3 w-3\" />\r\n                          <span>\r\n                            {new Date(form.created_at).toLocaleDateString()}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Action buttons */}\r\n                    <div className=\"flex items-center gap-2 ml-4\">\r\n                      <button\r\n                        onClick={() => {\r\n                          setSelectedForm(form);\r\n                          setShowDataModal(true);\r\n                        }}\r\n                        className=\"flex items-center gap-1 px-3 py-1.5 text-blue-600 hover:bg-blue-50 rounded-lg text-xs font-medium transition-colors\"\r\n                      >\r\n                        <Eye className=\"h-3 w-3\" />\r\n                        View\r\n                      </button>\r\n\r\n                      <button\r\n                        onClick={() => {\r\n                          setSelectedForm(form);\r\n                          setShowUploadModal(true);\r\n                        }}\r\n                        className=\"flex items-center gap-1 px-3 py-1.5 text-green-600 hover:bg-green-50 rounded-lg text-xs font-medium transition-colors\"\r\n                      >\r\n                        <Upload className=\"h-3 w-3\" />\r\n                        Upload\r\n                      </button>\r\n                      <button\r\n                        onClick={() => {\r\n                          setSelectedForm(form);\r\n                          setShowEditForm(true);\r\n                        }}\r\n                        className=\"flex items-center gap-1 px-3 py-1.5 text-indigo-600 hover:bg-indigo-50 rounded-lg text-xs font-medium transition-colors\"\r\n                      >\r\n                        <Edit className=\"h-3 w-3\" />\r\n                        Edit\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleDeleteClick(form)}\r\n                        className=\"flex items-center gap-1 px-3 py-1.5 text-red-600 hover:bg-red-50 rounded-lg text-xs font-medium transition-colors\"\r\n                      >\r\n                        <Trash2 className=\"h-3 w-3\" />\r\n                        Delete\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Modals */}\r\n        {(showCreateForm || showEditForm) && (\r\n          <CreateFormModal\r\n            setShowCreateForm={\r\n              showEditForm ? setShowEditForm : setShowCreateForm\r\n            }\r\n            fetchForms={fetchForms}\r\n            selectedBatch={selectedBatch}\r\n            isEditing={showEditForm}\r\n            formData={showEditForm ? selectedForm : null}\r\n          />\r\n        )}\r\n        {showUploadModal && (\r\n          <UploadModal\r\n            selectedForm={selectedForm}\r\n            setShowUploadModal={setShowUploadModal}\r\n            fetchForms={fetchForms}\r\n            selectedBatch={selectedBatch}\r\n          />\r\n        )}\r\n        {showDataModal && (\r\n          <DataViewModal\r\n            selectedForm={selectedForm}\r\n            setShowDataModal={setShowDataModal}\r\n            selectedBatch={selectedBatch}\r\n          />\r\n        )}\r\n        {showDeleteModal && (\r\n          <DeleteFormModal\r\n            isOpen={showDeleteModal}\r\n            onClose={() => setShowDeleteModal(false)}\r\n            form={selectedForm}\r\n            onFormDeleted={fetchForms}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FormManagementSystem;\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AAGA;AACA;AACA;AACA;AACA;AA3BA;;;;;;AAqBA,MAAM;;;;;;AAQN,MAAM,uBAAuB;IAC3B,MAAM,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,uHAAA,CAAA,kBAAe,AAAD;IACxC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,sDAAsD;IACtD,MAAM,aAAa;QACjB,IAAI;YACF,WAAW;YACX,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,GAAG,WAAW,OAAO,EAAE,eAAe;YACvE,SAAS,SAAS,IAAI,CAAC,IAAI,IAAI,EAAE;YACjC,SAAS;QACX,EAAE,OAAO,KAAK;YACZ,SAAS;YACT,QAAQ,KAAK,CAAC,yBAAyB;QACzC,SAAU;YACR,WAAW;QACb;IACF;IAEA,uBAAuB;IACvB,MAAM,mBAAmB,OAAO;QAC9B,IAAI,CAAC,OAAO,OAAO,CAAC,+CAA+C;QAEnE,IAAI;YACF,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC,GAAG,WAAW,OAAO,EAAE,QAAQ;YAClD,cAAc,yBAAyB;QACzC,EAAE,OAAO,KAAK;YACZ,SAAS;YACT,QAAQ,KAAK,CAAC,wBAAwB;QACxC;IACF;IAEA,4BAA4B;IAC5B,MAAM,oBAAoB,CAAC;QACzB,gBAAgB;QAChB,mBAAmB;IACrB;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,eAAe;YACjB;QACF;IACF,GAAG;QAAC;KAAc;IAElB,iDAAiD;IACjD,MAAM,kBAAkB;WACnB,IAAI,IAAI,MAAM,GAAG,CAAC,CAAC,OAAS,KAAK,YAAY,EAAE,MAAM,CAAC;KAC1D,CAAC,IAAI;IAEN,MAAM,kBAAkB;WACnB,IAAI,IACL,MACG,MAAM,CACL,CAAC,OACC,kBAAkB,SAAS,KAAK,YAAY,KAAK,eAEpD,GAAG,CAAC,CAAC,OAAS,KAAK,cAAc,EACjC,MAAM,CAAC;KAEb,CAAC,IAAI;IAEN,oDAAoD;IACpD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,kBAAkB,OAAO;YAC3B,MAAM,iBAAiB,MACpB,MAAM,CAAC,CAAC,OAAS,KAAK,YAAY,KAAK,eACvC,GAAG,CAAC,CAAC,OAAS,KAAK,cAAc,EACjC,MAAM,CAAC;YAEV,IACE,mBAAmB,SACnB,CAAC,eAAe,QAAQ,CAAC,iBACzB;gBACA,kBAAkB;YACpB;QACF,OAAO;YACL,kBAAkB;QACpB;IACF,GAAG;QAAC;QAAe;QAAO;KAAe;IAEzC,eAAe;IACf,MAAM,gBAAgB,MAAM,MAAM,CAAC,CAAC;QAClC,MAAM,gBACJ,KAAK,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,OACxD,KAAK,YAAY,EAAE,cAAc,SAAS,WAAW,WAAW,OAChE,KAAK,WAAW,EAAE,cAAc,SAAS,WAAW,WAAW;QAEjE,MAAM,iBACJ,kBAAkB,SAAS,KAAK,YAAY,KAAK;QAEnD,OAAO,iBAAiB;IAC1B;IAEA,MAAM,kBAAkB;QACtB,cAAc;QACd,iBAAiB;IACnB;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,SAAS;YACb,QAAQ;YACR,UAAU;YACV,aAAa;YACb,cAAc;QAChB;QACA,OAAO,MAAM,CAAC,KAAK,IAAI;IACzB;IAEA,MAAM,yBAAyB,CAAC;QAC9B,MAAM,QAAQ,SAAS;QACvB,IAAI,UAAU,GAAG,OAAO;QACxB,IAAI,QAAQ,IAAI,OAAO;QACvB,IAAI,QAAQ,IAAI,OAAO;QACvB,OAAO;IACT;IAEA,MAAM,mBACJ,cACA,eAAe,SACf,kBAAkB,SAClB,mBAAmB;IAErB,sFAAsF;IACtF,MAAM,oBAAoB;QACxB,IAAI;YACF,0BAA0B;YAC1B,MAAM,aAAa,MAAM,GAAG,CAAC,CAAC,OAAS,CAAC;oBACtC,cAAc,KAAK,KAAK;oBACxB,MAAM,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC;oBAC1D,SAAS,KAAK,YAAY,IAAI;oBAC9B,UAAU,KAAK,cAAc,IAAI;oBACjC,mBAAmB,KAAK,eAAe,IAAI;oBAC3C,gBAAgB,IAAI,KAAK,KAAK,UAAU,EAAE,kBAAkB;gBAC9D,CAAC;YAED,mBAAmB;YACnB,MAAM,KAAK,6HAAA,CAAA,QAAU,CAAC,aAAa,CAAC;YAEpC,oBAAoB;YACpB,EAAE,CAAC,QAAQ,GAAG;gBACZ;oBAAE,KAAK;gBAAG;gBACV;oBAAE,KAAK;gBAAG;gBACV;oBAAE,KAAK;gBAAG;gBACV;oBAAE,KAAK;gBAAG;gBACV;oBAAE,KAAK;gBAAG;gBACV;oBAAE,KAAK;gBAAG;aACX;YAED,kBAAkB;YAClB,MAAM,KAAK,6HAAA,CAAA,QAAU,CAAC,QAAQ;YAC9B,6HAAA,CAAA,QAAU,CAAC,iBAAiB,CAAC,IAAI,IAAI,CAAC,cAAc,EAAE,eAAe;YAErE,oBAAoB;YACpB,MAAM,WAAW,CAAC,mBAAmB,EAAE,cAAc,CAAC,EACpD,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CACvC,KAAK,CAAC;YAEP,YAAY;YACZ,6HAAA,CAAA,YAAc,CAAC,IAAI;QACrB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;YACxC,MAAM;QACR;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS,IAAO,OAAO,QAAQ,CAAC,IAAI,GAAG;wCACvC,WAAU;kDAEV,cAAA,8OAAC,gNAAA,CAAA,YAAS;4CAAC,WAAU;;;;;;;;;;;kDAEvB,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAAwC;;;;;;0DAGtD,8OAAC;gDAAE,WAAU;;oDAAgB;oDAEpB;;;;;;;;;;;;;;;;;;;0CAKb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS;wCACT,WAAU;;0DAEV,8OAAC,8MAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;4CAAY;;;;;;;kDAGlC,8OAAC;wCACC,SAAS;4CACP,kBAAkB;4CAClB,SAAS;wCACX;wCACA,WAAU;;0DAEV,8OAAC,kMAAA,CAAA,OAAI;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;;;;;;;;;;;;;;;;;8BAQpC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,sMAAA,CAAA,SAAM;gDAAC,WAAU;;;;;;0DAClB,8OAAC;gDACC,MAAK;gDACL,aAAY;gDACZ,OAAO;gDACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;gDAC7C,WAAU;;;;;;;;;;;;kDAId,8OAAC;wCACC,OAAO;wCACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;wCAChD,WAAU;;0DAEV,8OAAC;gDAAO,OAAM;0DAAM;;;;;;4CACnB,gBAAgB,GAAG,CAAC,CAAC,wBACpB,8OAAC;oDAAqB,OAAO;8DAC1B;mDADU;;;;;;;;;;;;;;;;;4BAOlB,kCACC,8OAAC;gCACC,SAAS;gCACT,WAAU;;kDAEV,8OAAC,4LAAA,CAAA,IAAC;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;;;;;;8BAQjC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAG,WAAU;0CAAuC;;;;;;;;;;;sCAGvD,8OAAC;4BAAI,WAAU;sCACZ,wBACC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAE,WAAU;kDAAyB;;;;;;;;;;;2EAEtC,cAAc,MAAM,KAAK,kBAC3B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,8MAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC;wCAAE,WAAU;kDAAiB;;;;;;oCAC7B,kCACC,8OAAC;wCACC,SAAS;wCACT,WAAU;kDACX;;;;;;;;;;;2EAML,cAAc,GAAG,CAAC,CAAC,qBACjB,8OAAC;oCAEC,WAAU;8CAEV,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAG,WAAU;0EACX,KAAK,KAAK;;;;;;0EAEb,8OAAC;gEACC,WAAW,CAAC,kDAAkD,EAAE,aAAa,KAAK,IAAI,GAAG;0EAExF,KAAK,IAAI;;;;;;0EAEZ,8OAAC;gEACC,WAAW,CAAC,2CAA2C,EAAE,uBAAuB,KAAK,eAAe,GAAG;;oEAEtG,KAAK,eAAe;oEAAC;;;;;;;;;;;;;kEAI1B,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAU;;kFACb,8OAAC,gNAAA,CAAA,YAAS;wEAAC,WAAU;;;;;;kFACrB,8OAAC;kFAAM,KAAK,YAAY;;;;;;;;;;;;0EAE1B,8OAAC;gEAAI,WAAU;;kFACb,8OAAC,4MAAA,CAAA,YAAS;wEAAC,WAAU;;;;;;kFACrB,8OAAC;kFAAM,KAAK,cAAc;;;;;;;;;;;;0EAE5B,8OAAC;gEAAI,WAAU;;kFACb,8OAAC,0MAAA,CAAA,WAAQ;wEAAC,WAAU;;;;;;kFACpB,8OAAC;kFACE,IAAI,KAAK,KAAK,UAAU,EAAE,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;0DAOrD,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDACC,SAAS;4DACP,gBAAgB;4DAChB,iBAAiB;wDACnB;wDACA,WAAU;;0EAEV,8OAAC,gMAAA,CAAA,MAAG;gEAAC,WAAU;;;;;;4DAAY;;;;;;;kEAI7B,8OAAC;wDACC,SAAS;4DACP,gBAAgB;4DAChB,mBAAmB;wDACrB;wDACA,WAAU;;0EAEV,8OAAC,sMAAA,CAAA,SAAM;gEAAC,WAAU;;;;;;4DAAY;;;;;;;kEAGhC,8OAAC;wDACC,SAAS;4DACP,gBAAgB;4DAChB,gBAAgB;wDAClB;wDACA,WAAU;;0EAEV,8OAAC,2MAAA,CAAA,OAAI;gEAAC,WAAU;;;;;;4DAAY;;;;;;;kEAG9B,8OAAC;wDACC,SAAS,IAAM,kBAAkB;wDACjC,WAAU;;0EAEV,8OAAC,0MAAA,CAAA,SAAM;gEAAC,WAAU;;;;;;4DAAY;;;;;;;;;;;;;;;;;;;mCA5E/B,KAAK,EAAE;;;;;;;;;;;;;;;;gBAwFrB,CAAC,kBAAkB,YAAY,mBAC9B,8OAAC,2IAAA,CAAA,UAAe;oBACd,mBACE,eAAe,kBAAkB;oBAEnC,YAAY;oBACZ,eAAe;oBACf,WAAW;oBACX,UAAU,eAAe,eAAe;;;;;;gBAG3C,iCACC,8OAAC,uIAAA,CAAA,UAAW;oBACV,cAAc;oBACd,oBAAoB;oBACpB,YAAY;oBACZ,eAAe;;;;;;gBAGlB,+BACC,8OAAC,yIAAA,CAAA,UAAa;oBACZ,cAAc;oBACd,kBAAkB;oBAClB,eAAe;;;;;;gBAGlB,iCACC,8OAAC,2IAAA,CAAA,UAAe;oBACd,QAAQ;oBACR,SAAS,IAAM,mBAAmB;oBAClC,MAAM;oBACN,eAAe;;;;;;;;;;;;;;;;;AAM3B;uCAEe","debugId":null}}]
}